# Copyright (c) 2000 - 2019 The Regents of the University of California.
# All rights reserved.	
#
# This makefile includes the generic yaml2rpm Makefile 
# building packages for python 2
#

include $(YAML2RPM_HOME)/sys/Makefile

BOOTSTRAP_MODULES_FILE = modules.bootstrap.python2
MODULES_FILE = modules.build.python2
PYVERSIONS = pyversions2.yaml
GENEXTRAS +=  --map="{'pyversions.yaml':'$(PYVERSIONS)'}" 

EXTRAMODS=versions2.yaml

# Modules are common plus python2-specific
MODULES=$(shell sed '1d' versions.yaml  | awk -F: '{print $$1}' | sed 's/$$/.yaml/') \
        $(shell sed '1d' $(EXTRAMODS) | awk -F: '{print $$1}' | sed 's/$$/.yaml/')

PKGS = $(MODULES:.yaml=.pkg)

default: $(PKGS) $(MODULES_FILE)

$(MODULES_FILE):
	echo $(MODULES) > $(MODULES_FILE)
clean:
	- /bin/rm $(MODULES_FILE)

diag2: diag
	echo $(GENERATE)
